{"ast":null,"code":"// import { signoutUser } from '@/store/auth/reducer';\nimport axios from 'axios';\nimport store from '../Store/Store';\nexport const BASE_URL = \"http://ec2-34-230-37-2.compute-1.amazonaws.com\";\nconst instance = axios.create({\n  baseURL: BASE_URL\n});\nexport const clearUserData = () => {\n  // store.dispatch(signoutUser());\n};\nexport const getHeaders = async () => {\n  var _store$getState, _store$getState$Authl, _store$getState$Authl2;\n  if ((_store$getState = store.getState()) !== null && _store$getState !== void 0 && (_store$getState$Authl = _store$getState.Authlogin) !== null && _store$getState$Authl !== void 0 && (_store$getState$Authl2 = _store$getState$Authl.data) !== null && _store$getState$Authl2 !== void 0 && _store$getState$Authl2.token) {\n    var _store$getState2, _store$getState2$Auth, _store$getState2$Auth2;\n    return {\n      Authorization: `Bearer ${(_store$getState2 = store.getState()) === null || _store$getState2 === void 0 ? void 0 : (_store$getState2$Auth = _store$getState2.Authlogin) === null || _store$getState2$Auth === void 0 ? void 0 : (_store$getState2$Auth2 = _store$getState2$Auth.data) === null || _store$getState2$Auth2 === void 0 ? void 0 : _store$getState2$Auth2.token}`\n    };\n  }\n  return {};\n};\n\n// Add a request interceptor\ninstance.interceptors.request.use(config => {\n  var _store$getState3, _store$getState3$auth;\n  const conf = config;\n  console.log(store, '--store');\n  if ((_store$getState3 = store.getState()) !== null && _store$getState3 !== void 0 && (_store$getState3$auth = _store$getState3.auth) !== null && _store$getState3$auth !== void 0 && _store$getState3$auth.token) {\n    const token = `Bearer ${store.getState().auth.token}`;\n    conf.headers.Authorization = token;\n  }\n  return conf;\n},\n// Do something before request is sent\nerror =>\n// Do something with request error\nPromise.reject(error));\n\n// Add a response interceptor\ninstance.interceptors.response.use(response => response, error => {\n  // Do something with response error\n  if (error.response && error.response.status === 401) {\n    clearUserData();\n  }\n  return Promise.reject(error);\n});\nexport default instance;","map":{"version":3,"names":["axios","store","BASE_URL","instance","create","baseURL","clearUserData","getHeaders","_store$getState","_store$getState$Authl","_store$getState$Authl2","getState","Authlogin","data","token","_store$getState2","_store$getState2$Auth","_store$getState2$Auth2","Authorization","interceptors","request","use","config","_store$getState3","_store$getState3$auth","conf","console","log","auth","headers","error","Promise","reject","response","status"],"sources":["C:/Users/Harpreet Singh/Downloads/dynamicPanel/dynamicPanel/src/Collection/Interceptor.js"],"sourcesContent":["// import { signoutUser } from '@/store/auth/reducer';\r\nimport axios from 'axios';\r\nimport store from '../Store/Store';\r\n\r\nexport const BASE_URL = \"http://ec2-34-230-37-2.compute-1.amazonaws.com\"\r\n\r\n\r\nconst instance = axios.create({\r\n  baseURL: BASE_URL,\r\n});\r\n\r\nexport const clearUserData = () => {\r\n  // store.dispatch(signoutUser());\r\n};\r\nexport const getHeaders = async () => {\r\n \r\n  if (store.getState()?.Authlogin?.data?.token) {\r\n    return {\r\n      Authorization: `Bearer ${store.getState()?.Authlogin?.data?.token}`,\r\n    };\r\n  }\r\n\r\n  return {};\r\n};\r\n\r\n// Add a request interceptor\r\ninstance.interceptors.request.use(\r\n  (config) => {\r\n    const conf = config;\r\n    console.log(store,'--store')\r\n    if (store.getState()?.auth?.token) {\r\n      const token = `Bearer ${store.getState().auth.token}`;\r\n      conf.headers.Authorization = token;\r\n    }\r\n\r\n    return conf;\r\n  },\r\n  // Do something before request is sent\r\n  (error) =>\r\n    // Do something with request error\r\n    Promise.reject(error),\r\n);\r\n\r\n// Add a response interceptor\r\ninstance.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    // Do something with response error\r\n    if (\r\n      error.response &&\r\n      error.response.status === 401\r\n    ) {\r\n      clearUserData();\r\n    }\r\n    return Promise.reject(error);\r\n  },\r\n);\r\n\r\nexport default instance;"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,MAAM,gBAAgB;AAElC,OAAO,MAAMC,QAAQ,GAAG,gDAAgD;AAGxE,MAAMC,QAAQ,GAAGH,KAAK,CAACI,MAAM,CAAC;EAC5BC,OAAO,EAAEH;AACX,CAAC,CAAC;AAEF,OAAO,MAAMI,aAAa,GAAGA,CAAA,KAAM;EACjC;AAAA,CACD;AACD,OAAO,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;EAAA,IAAAC,eAAA,EAAAC,qBAAA,EAAAC,sBAAA;EAEpC,KAAAF,eAAA,GAAIP,KAAK,CAACU,QAAQ,EAAE,cAAAH,eAAA,gBAAAC,qBAAA,GAAhBD,eAAA,CAAkBI,SAAS,cAAAH,qBAAA,gBAAAC,sBAAA,GAA3BD,qBAAA,CAA6BI,IAAI,cAAAH,sBAAA,eAAjCA,sBAAA,CAAmCI,KAAK,EAAE;IAAA,IAAAC,gBAAA,EAAAC,qBAAA,EAAAC,sBAAA;IAC5C,OAAO;MACLC,aAAa,EAAG,UAAO,CAAAH,gBAAA,GAAEd,KAAK,CAACU,QAAQ,EAAE,cAAAI,gBAAA,wBAAAC,qBAAA,GAAhBD,gBAAA,CAAkBH,SAAS,cAAAI,qBAAA,wBAAAC,sBAAA,GAA3BD,qBAAA,CAA6BH,IAAI,cAAAI,sBAAA,uBAAjCA,sBAAA,CAAmCH,KAAM;IACpE,CAAC;EACH;EAEA,OAAO,CAAC,CAAC;AACX,CAAC;;AAED;AACAX,QAAQ,CAACgB,YAAY,CAACC,OAAO,CAACC,GAAG,CAC9BC,MAAM,IAAK;EAAA,IAAAC,gBAAA,EAAAC,qBAAA;EACV,MAAMC,IAAI,GAAGH,MAAM;EACnBI,OAAO,CAACC,GAAG,CAAC1B,KAAK,EAAC,SAAS,CAAC;EAC5B,KAAAsB,gBAAA,GAAItB,KAAK,CAACU,QAAQ,EAAE,cAAAY,gBAAA,gBAAAC,qBAAA,GAAhBD,gBAAA,CAAkBK,IAAI,cAAAJ,qBAAA,eAAtBA,qBAAA,CAAwBV,KAAK,EAAE;IACjC,MAAMA,KAAK,GAAI,UAASb,KAAK,CAACU,QAAQ,EAAE,CAACiB,IAAI,CAACd,KAAM,EAAC;IACrDW,IAAI,CAACI,OAAO,CAACX,aAAa,GAAGJ,KAAK;EACpC;EAEA,OAAOW,IAAI;AACb,CAAC;AACD;AACCK,KAAK;AACJ;AACAC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CACxB;;AAED;AACA3B,QAAQ,CAACgB,YAAY,CAACc,QAAQ,CAACZ,GAAG,CAC/BY,QAAQ,IAAKA,QAAQ,EACrBH,KAAK,IAAK;EACT;EACA,IACEA,KAAK,CAACG,QAAQ,IACdH,KAAK,CAACG,QAAQ,CAACC,MAAM,KAAK,GAAG,EAC7B;IACA5B,aAAa,EAAE;EACjB;EACA,OAAOyB,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CAAC,CACF;AAED,eAAe3B,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}