{"ast":null,"code":"// import { signoutUser } from '@/store/auth/reducer';\nimport axios from 'axios';\nimport store from '../Store/Store';\nexport const BASE_URL = \"http://ec2-34-230-37-2.compute-1.amazonaws.com\";\nconst instance = axios.create({\n  baseURL: BASE_URL\n});\nconsole.log(store.getState(), \"store.getState()\");\nexport const clearUserData = () => {\n  // store.dispatch(signoutUser());\n};\nexport const getHeaders = async () => {\n  var _store$getState, _store$getState$auth;\n  if ((_store$getState = store.getState()) !== null && _store$getState !== void 0 && (_store$getState$auth = _store$getState.auth) !== null && _store$getState$auth !== void 0 && _store$getState$auth.token) {\n    var _store$getState2, _store$getState2$auth;\n    return {\n      Authorization: `Bearer ${(_store$getState2 = store.getState()) === null || _store$getState2 === void 0 ? void 0 : (_store$getState2$auth = _store$getState2.auth) === null || _store$getState2$auth === void 0 ? void 0 : _store$getState2$auth.token}`\n    };\n  }\n  return {};\n};\n\n// Add a request interceptor\ninstance.interceptors.request.use(config => {\n  var _store$getState3, _store$getState3$auth;\n  const conf = config;\n  console.log(store, '--store');\n  if ((_store$getState3 = store.getState()) !== null && _store$getState3 !== void 0 && (_store$getState3$auth = _store$getState3.auth) !== null && _store$getState3$auth !== void 0 && _store$getState3$auth.token) {\n    const token = `Bearer ${store.getState().auth.token}`;\n    conf.headers.Authorization = token;\n  }\n  return conf;\n},\n// Do something before request is sent\nerror =>\n// Do something with request error\nPromise.reject(error));\n\n// Add a response interceptor\ninstance.interceptors.response.use(response => response, error => {\n  // Do something with response error\n  if (error.response && error.response.status === 401) {\n    clearUserData();\n  }\n  return Promise.reject(error);\n});\nexport default instance;","map":{"version":3,"names":["axios","store","BASE_URL","instance","create","baseURL","console","log","getState","clearUserData","getHeaders","_store$getState","_store$getState$auth","auth","token","_store$getState2","_store$getState2$auth","Authorization","interceptors","request","use","config","_store$getState3","_store$getState3$auth","conf","headers","error","Promise","reject","response","status"],"sources":["C:/Users/Harpreet Singh/Downloads/dynamicPanel/dynamicPanel/src/Collection/Interceptor.js"],"sourcesContent":["// import { signoutUser } from '@/store/auth/reducer';\r\nimport axios from 'axios';\r\nimport store from '../Store/Store';\r\n\r\nexport const BASE_URL = \"http://ec2-34-230-37-2.compute-1.amazonaws.com\"\r\n\r\n\r\nconst instance = axios.create({\r\n  baseURL: BASE_URL,\r\n});\r\n\r\nconsole.log(store.getState(),\"store.getState()\")\r\n\r\nexport const clearUserData = () => {\r\n  // store.dispatch(signoutUser());\r\n};\r\nexport const getHeaders = async () => {\r\n \r\n  if (store.getState()?.auth?.token) {\r\n    return {\r\n      Authorization: `Bearer ${store.getState()?.auth?.token}`,\r\n    };\r\n  }\r\n\r\n  return {};\r\n};\r\n\r\n// Add a request interceptor\r\ninstance.interceptors.request.use(\r\n  (config) => {\r\n    const conf = config;\r\n    console.log(store,'--store')\r\n    if (store.getState()?.auth?.token) {\r\n      const token = `Bearer ${store.getState().auth.token}`;\r\n      conf.headers.Authorization = token;\r\n    }\r\n\r\n    return conf;\r\n  },\r\n  // Do something before request is sent\r\n  (error) =>\r\n    // Do something with request error\r\n    Promise.reject(error),\r\n);\r\n\r\n// Add a response interceptor\r\ninstance.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    // Do something with response error\r\n    if (\r\n      error.response &&\r\n      error.response.status === 401\r\n    ) {\r\n      clearUserData();\r\n    }\r\n    return Promise.reject(error);\r\n  },\r\n);\r\n\r\nexport default instance;"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,MAAM,gBAAgB;AAElC,OAAO,MAAMC,QAAQ,GAAG,gDAAgD;AAGxE,MAAMC,QAAQ,GAAGH,KAAK,CAACI,MAAM,CAAC;EAC5BC,OAAO,EAAEH;AACX,CAAC,CAAC;AAEFI,OAAO,CAACC,GAAG,CAACN,KAAK,CAACO,QAAQ,EAAE,EAAC,kBAAkB,CAAC;AAEhD,OAAO,MAAMC,aAAa,GAAGA,CAAA,KAAM;EACjC;AAAA,CACD;AACD,OAAO,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;EAAA,IAAAC,eAAA,EAAAC,oBAAA;EAEpC,KAAAD,eAAA,GAAIV,KAAK,CAACO,QAAQ,EAAE,cAAAG,eAAA,gBAAAC,oBAAA,GAAhBD,eAAA,CAAkBE,IAAI,cAAAD,oBAAA,eAAtBA,oBAAA,CAAwBE,KAAK,EAAE;IAAA,IAAAC,gBAAA,EAAAC,qBAAA;IACjC,OAAO;MACLC,aAAa,EAAG,UAAO,CAAAF,gBAAA,GAAEd,KAAK,CAACO,QAAQ,EAAE,cAAAO,gBAAA,wBAAAC,qBAAA,GAAhBD,gBAAA,CAAkBF,IAAI,cAAAG,qBAAA,uBAAtBA,qBAAA,CAAwBF,KAAM;IACzD,CAAC;EACH;EAEA,OAAO,CAAC,CAAC;AACX,CAAC;;AAED;AACAX,QAAQ,CAACe,YAAY,CAACC,OAAO,CAACC,GAAG,CAC9BC,MAAM,IAAK;EAAA,IAAAC,gBAAA,EAAAC,qBAAA;EACV,MAAMC,IAAI,GAAGH,MAAM;EACnBf,OAAO,CAACC,GAAG,CAACN,KAAK,EAAC,SAAS,CAAC;EAC5B,KAAAqB,gBAAA,GAAIrB,KAAK,CAACO,QAAQ,EAAE,cAAAc,gBAAA,gBAAAC,qBAAA,GAAhBD,gBAAA,CAAkBT,IAAI,cAAAU,qBAAA,eAAtBA,qBAAA,CAAwBT,KAAK,EAAE;IACjC,MAAMA,KAAK,GAAI,UAASb,KAAK,CAACO,QAAQ,EAAE,CAACK,IAAI,CAACC,KAAM,EAAC;IACrDU,IAAI,CAACC,OAAO,CAACR,aAAa,GAAGH,KAAK;EACpC;EAEA,OAAOU,IAAI;AACb,CAAC;AACD;AACCE,KAAK;AACJ;AACAC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CACxB;;AAED;AACAvB,QAAQ,CAACe,YAAY,CAACW,QAAQ,CAACT,GAAG,CAC/BS,QAAQ,IAAKA,QAAQ,EACrBH,KAAK,IAAK;EACT;EACA,IACEA,KAAK,CAACG,QAAQ,IACdH,KAAK,CAACG,QAAQ,CAACC,MAAM,KAAK,GAAG,EAC7B;IACArB,aAAa,EAAE;EACjB;EACA,OAAOkB,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CAAC,CACF;AAED,eAAevB,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}