{"ast":null,"code":"var _store$getState, _store$getState$Authl, _store$getState$Authl2;\n// import { signoutUser } from '@/store/auth/reducer';\nimport axios from 'axios';\nimport store from '../Store/Store';\nexport const BASE_URL = \"http://ec2-34-230-37-2.compute-1.amazonaws.com\";\nconst instance = axios.create({\n  baseURL: BASE_URL\n});\nconsole.log((_store$getState = store.getState()) === null || _store$getState === void 0 ? void 0 : (_store$getState$Authl = _store$getState.Authlogin) === null || _store$getState$Authl === void 0 ? void 0 : (_store$getState$Authl2 = _store$getState$Authl.data) === null || _store$getState$Authl2 === void 0 ? void 0 : _store$getState$Authl2.token, \"store.getState()\");\nexport const clearUserData = () => {\n  // store.dispatch(signoutUser());\n};\nexport const getHeaders = async () => {\n  var _store$getState2, _store$getState2$auth;\n  if ((_store$getState2 = store.getState()) !== null && _store$getState2 !== void 0 && (_store$getState2$auth = _store$getState2.auth) !== null && _store$getState2$auth !== void 0 && _store$getState2$auth.token) {\n    var _store$getState3, _store$getState3$auth;\n    return {\n      Authorization: `Bearer ${(_store$getState3 = store.getState()) === null || _store$getState3 === void 0 ? void 0 : (_store$getState3$auth = _store$getState3.auth) === null || _store$getState3$auth === void 0 ? void 0 : _store$getState3$auth.token}`\n    };\n  }\n  return {};\n};\n\n// Add a request interceptor\ninstance.interceptors.request.use(config => {\n  var _store$getState4, _store$getState4$auth;\n  const conf = config;\n  console.log(store, '--store');\n  if ((_store$getState4 = store.getState()) !== null && _store$getState4 !== void 0 && (_store$getState4$auth = _store$getState4.auth) !== null && _store$getState4$auth !== void 0 && _store$getState4$auth.token) {\n    const token = `Bearer ${store.getState().auth.token}`;\n    conf.headers.Authorization = token;\n  }\n  return conf;\n},\n// Do something before request is sent\nerror =>\n// Do something with request error\nPromise.reject(error));\n\n// Add a response interceptor\ninstance.interceptors.response.use(response => response, error => {\n  // Do something with response error\n  if (error.response && error.response.status === 401) {\n    clearUserData();\n  }\n  return Promise.reject(error);\n});\nexport default instance;","map":{"version":3,"names":["axios","store","BASE_URL","instance","create","baseURL","console","log","_store$getState","getState","_store$getState$Authl","Authlogin","_store$getState$Authl2","data","token","clearUserData","getHeaders","_store$getState2","_store$getState2$auth","auth","_store$getState3","_store$getState3$auth","Authorization","interceptors","request","use","config","_store$getState4","_store$getState4$auth","conf","headers","error","Promise","reject","response","status"],"sources":["C:/Users/Harpreet Singh/Downloads/dynamicPanel/dynamicPanel/src/Collection/Interceptor.js"],"sourcesContent":["// import { signoutUser } from '@/store/auth/reducer';\r\nimport axios from 'axios';\r\nimport store from '../Store/Store';\r\n\r\nexport const BASE_URL = \"http://ec2-34-230-37-2.compute-1.amazonaws.com\"\r\n\r\n\r\nconst instance = axios.create({\r\n  baseURL: BASE_URL,\r\n});\r\n\r\nconsole.log(store.getState()?.Authlogin?.data?.token,\"store.getState()\")\r\n\r\nexport const clearUserData = () => {\r\n  // store.dispatch(signoutUser());\r\n};\r\nexport const getHeaders = async () => {\r\n \r\n  if (store.getState()?.auth?.token) {\r\n    return {\r\n      Authorization: `Bearer ${store.getState()?.auth?.token}`,\r\n    };\r\n  }\r\n\r\n  return {};\r\n};\r\n\r\n// Add a request interceptor\r\ninstance.interceptors.request.use(\r\n  (config) => {\r\n    const conf = config;\r\n    console.log(store,'--store')\r\n    if (store.getState()?.auth?.token) {\r\n      const token = `Bearer ${store.getState().auth.token}`;\r\n      conf.headers.Authorization = token;\r\n    }\r\n\r\n    return conf;\r\n  },\r\n  // Do something before request is sent\r\n  (error) =>\r\n    // Do something with request error\r\n    Promise.reject(error),\r\n);\r\n\r\n// Add a response interceptor\r\ninstance.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    // Do something with response error\r\n    if (\r\n      error.response &&\r\n      error.response.status === 401\r\n    ) {\r\n      clearUserData();\r\n    }\r\n    return Promise.reject(error);\r\n  },\r\n);\r\n\r\nexport default instance;"],"mappings":";AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,MAAM,gBAAgB;AAElC,OAAO,MAAMC,QAAQ,GAAG,gDAAgD;AAGxE,MAAMC,QAAQ,GAAGH,KAAK,CAACI,MAAM,CAAC;EAC5BC,OAAO,EAAEH;AACX,CAAC,CAAC;AAEFI,OAAO,CAACC,GAAG,EAAAC,eAAA,GAACP,KAAK,CAACQ,QAAQ,EAAE,cAAAD,eAAA,wBAAAE,qBAAA,GAAhBF,eAAA,CAAkBG,SAAS,cAAAD,qBAAA,wBAAAE,sBAAA,GAA3BF,qBAAA,CAA6BG,IAAI,cAAAD,sBAAA,uBAAjCA,sBAAA,CAAmCE,KAAK,EAAC,kBAAkB,CAAC;AAExE,OAAO,MAAMC,aAAa,GAAGA,CAAA,KAAM;EACjC;AAAA,CACD;AACD,OAAO,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;EAAA,IAAAC,gBAAA,EAAAC,qBAAA;EAEpC,KAAAD,gBAAA,GAAIhB,KAAK,CAACQ,QAAQ,EAAE,cAAAQ,gBAAA,gBAAAC,qBAAA,GAAhBD,gBAAA,CAAkBE,IAAI,cAAAD,qBAAA,eAAtBA,qBAAA,CAAwBJ,KAAK,EAAE;IAAA,IAAAM,gBAAA,EAAAC,qBAAA;IACjC,OAAO;MACLC,aAAa,EAAG,UAAO,CAAAF,gBAAA,GAAEnB,KAAK,CAACQ,QAAQ,EAAE,cAAAW,gBAAA,wBAAAC,qBAAA,GAAhBD,gBAAA,CAAkBD,IAAI,cAAAE,qBAAA,uBAAtBA,qBAAA,CAAwBP,KAAM;IACzD,CAAC;EACH;EAEA,OAAO,CAAC,CAAC;AACX,CAAC;;AAED;AACAX,QAAQ,CAACoB,YAAY,CAACC,OAAO,CAACC,GAAG,CAC9BC,MAAM,IAAK;EAAA,IAAAC,gBAAA,EAAAC,qBAAA;EACV,MAAMC,IAAI,GAAGH,MAAM;EACnBpB,OAAO,CAACC,GAAG,CAACN,KAAK,EAAC,SAAS,CAAC;EAC5B,KAAA0B,gBAAA,GAAI1B,KAAK,CAACQ,QAAQ,EAAE,cAAAkB,gBAAA,gBAAAC,qBAAA,GAAhBD,gBAAA,CAAkBR,IAAI,cAAAS,qBAAA,eAAtBA,qBAAA,CAAwBd,KAAK,EAAE;IACjC,MAAMA,KAAK,GAAI,UAASb,KAAK,CAACQ,QAAQ,EAAE,CAACU,IAAI,CAACL,KAAM,EAAC;IACrDe,IAAI,CAACC,OAAO,CAACR,aAAa,GAAGR,KAAK;EACpC;EAEA,OAAOe,IAAI;AACb,CAAC;AACD;AACCE,KAAK;AACJ;AACAC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CACxB;;AAED;AACA5B,QAAQ,CAACoB,YAAY,CAACW,QAAQ,CAACT,GAAG,CAC/BS,QAAQ,IAAKA,QAAQ,EACrBH,KAAK,IAAK;EACT;EACA,IACEA,KAAK,CAACG,QAAQ,IACdH,KAAK,CAACG,QAAQ,CAACC,MAAM,KAAK,GAAG,EAC7B;IACApB,aAAa,EAAE;EACjB;EACA,OAAOiB,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CAAC,CACF;AAED,eAAe5B,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}